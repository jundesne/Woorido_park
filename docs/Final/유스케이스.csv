이름,관련 유스케이스,대체 흐름,도메인,마지막 업데이트,상태,설명,액터,우선순위,전제 조건,주요 흐름
회원가입,"로그인, 이메일 인증","- 이메일 중복: 이미 가입된 이메일 안내 및 로그인 유도
- 비밀번호 불일치: 비밀번호 확인 재입력 요청
- 필수 정보 누락: 누락된 필드 표시 및 입력 요청
- 약관 미동의: 필수 약관 동의 안내",인증 시스템,2026년 1월 5일,대기,비회원이 시스템에 새 계정을 생성하는 과정,"비회원, 시스템",P0 - 필수,없음,"1. 비회원이 회원가입 페이지 접속
2. 이메일, 비밀번호, 닉네임 입력
3. 필수 약관 동의
4. 가입하기 버튼 클릭
5. 시스템이 이메일 중복 확인
6. 이메일 인증 메일 발송
7. 인증 완료 후 가입 완료"
로그인,"회원가입, 토큰 갱신","- 인증 실패: 이메일 또는 비밀번호 오류 메시지 표시
- 계정 잠금: 5회 실패 시 일시 잠금 및 안내
- 비밀번호 찾기: 이메일로 재설정 링크 발송
- 소셜 로그인: 카카오/구글 OAuth 처리",인증 시스템,2026년 1월 5일,대기,회원이 시스템에 자신의 계정으로 접속하는 과정,"비회원, 시스템",P0 - 필수,회원가입이 완료되어 있어야 함,"1. 사용자가 로그인 페이지 접속
2. 이메일과 비밀번호 입력
3. 로그인 버튼 클릭
4. 시스템이 자격 증명 검증
5. JWT Access Token 및 Refresh Token 발급
6. 메인 페이지로 이동"
소셜 로그인,"회원가입, 로그인","- 최초 로그인: 자동 회원가입 후 추가 정보 입력 요청
- 연동 실패: OAuth 제공자 오류 시 일반 로그인 안내
- 이메일 충돌: 기존 계정과 이메일 중복 시 계정 연동 제안",인증 시스템,2026년 1월 5일,대기,외부 OAuth 제공자를 통한 간편 로그인,"비회원, 시스템",P2 - 선택,카카오 또는 구글 계정 보유,"1. 사용자가 소셜 로그인 버튼 클릭
2. OAuth 제공자 인증 페이지로 리다이렉트
3. 사용자가 권한 승인
4. 콜백으로 인증 코드 수신
5. 시스템이 토큰 교환 및 사용자 정보 조회
6. 기존 회원이면 로그인, 신규면 자동 가입"
토큰 갱신,"로그인","- Refresh Token 만료: 재로그인 요청
- 토큰 위변조: 모든 세션 무효화 및 재로그인",인증 시스템,2026년 1월 5일,대기,만료된 Access Token을 갱신하는 과정,"회원, 시스템",P0 - 필수,유효한 Refresh Token 보유,"1. Access Token 만료 감지
2. Refresh Token으로 갱신 요청
3. 시스템이 Refresh Token 검증
4. 새로운 Access Token 발급
5. 기존 요청 재시도"
비밀번호 재설정,"로그인, 이메일 인증","- 이메일 미등록: 회원가입 안내
- 링크 만료: 재설정 이메일 재발송 안내
- 동일 비밀번호: 이전과 다른 비밀번호 입력 요청",인증 시스템,2026년 1월 5일,대기,비밀번호를 분실한 회원이 새 비밀번호를 설정,"비회원, 시스템",P1 - 중요,가입된 이메일 주소 보유,"1. 비밀번호 찾기 클릭
2. 가입 이메일 입력
3. 시스템이 재설정 링크 이메일 발송
4. 사용자가 이메일 링크 클릭
5. 새 비밀번호 입력 및 확인
6. 비밀번호 변경 완료"
잔액 조회,"충전하기, 거래내역 조회","- 조회 실패: 새로고침 안내
- 동기화 지연: 최신 정보 로딩 중 표시",어카운트 시스템,2026년 1월 5일,대기,회원이 우리두 어카운트의 가용/락 잔액을 확인,"회원, 시스템",P0 - 필수,로그인 상태,"1. 회원이 마이페이지 또는 헤더에서 잔액 확인
2. 시스템이 ACCOUNTS 테이블 조회
3. 가용 잔액(balance)과 락 잔액(locked_balance) 표시
4. 락 상세 버튼 클릭 시 모임별 보증금 현황 표시"
충전하기,"잔액 조회, 거래내역 조회","- 결제 실패: 다른 결제 수단 안내
- 결제 취소: 충전 취소 확인 및 잔액 미반영
- 최소/최대 금액 초과: 허용 범위 안내 (1만원~100만원)
- PG사 오류: 잠시 후 재시도 안내",어카운트 시스템,2026년 1월 5일,대기,회원이 토스페이를 통해 가용 잔액을 충전,"회원, 시스템, 토스페이",P0 - 필수,로그인 상태,"1. 회원이 충전하기 버튼 클릭
2. 충전 금액 선택 또는 직접 입력
3. 토스페이 결제 페이지로 이동
4. 결제 완료
5. 콜백으로 결제 결과 수신
6. ACCOUNTS.balance 증가
7. ACCOUNT_TRANSACTIONS 기록 (type=CHARGE)
8. 충전 완료 알림"
출금하기,"잔액 조회, 출금 계좌 등록","- 잔액 부족: 출금 가능 금액 안내
- 계좌 미등록: 계좌 등록 먼저 요청
- 출금 한도 초과: 일일/월간 한도 안내
- 계좌 오류: 계좌 정보 재확인 요청",어카운트 시스템,2026년 1월 5일,대기,회원이 가용 잔액을 등록된 은행 계좌로 출금,"회원, 시스템",P2 - 선택,로그인 및 출금 계좌 등록 완료,"1. 회원이 출금하기 버튼 클릭
2. 출금 금액 입력
3. 등록된 출금 계좌 선택
4. 출금 요청 확인
5. ACCOUNTS.balance 차감
6. ACCOUNT_TRANSACTIONS 기록 (type=WITHDRAW)
7. 은행 이체 처리 (1~3 영업일)
8. 출금 완료 알림"
거래내역 조회,"잔액 조회, 충전하기","- 내역 없음: 첫 충전 유도 CTA 표시
- 로딩 실패: 새로고침 안내",어카운트 시스템,2026년 1월 5일,대기,회원이 충전/출금/락/해제 등 거래 이력을 확인,"회원, 시스템",P1 - 중요,로그인 상태,"1. 회원이 거래내역 메뉴 선택
2. 시스템이 ACCOUNT_TRANSACTIONS 조회
3. 타임라인 형식으로 거래 목록 표시
4. 필터(유형별) 및 기간 선택 가능
5. 페이지네이션 (20개씩)"
락 상세 조회,"잔액 조회, 모임 상세 조회","- 락 없음: 모임 가입 유도 CTA
- 모임 삭제됨: 해당 모임 정보 비활성화 표시",어카운트 시스템,2026년 1월 5일,대기,회원이 모임별 보증금 락 현황을 상세 확인,"회원, 시스템",P0 - 필수,로그인 및 1개 이상 모임 가입,"1. 회원이 잔액 카드에서 락 상세 클릭
2. BottomSheet로 락 목록 표시
3. 모임명, 락 금액, 락 시작일 표시
4. 모임 클릭 시 해당 모임 상세로 이동"
모임 탐색,"모임 상세 조회, 모임 가입","- 검색 결과 없음: 다른 키워드 제안 또는 모임 생성 유도
- 필터 결과 없음: 필터 조건 완화 제안",모임 시스템,2026년 1월 5일,대기,비회원/회원이 공개된 모임을 검색하고 탐색,"비회원, 회원, 시스템",P1 - 중요,없음,"1. 사용자가 탐색 페이지 접속
2. 카테고리 선택 또는 키워드 검색
3. 시스템이 GYE 테이블에서 공개 모임 조회
4. 모임 카드 목록 표시 (썸네일, 이름, 회비, 인원)
5. 카드 클릭 시 모임 상세 페이지로 이동"
모임 상세 조회,"모임 탐색, 모임 가입","- 비공개 모임: 접근 권한 없음 안내
- 삭제된 모임: 404 페이지 및 해산 정보 표시
- 정원 마감: 대기 신청 또는 다른 모임 추천",모임 시스템,2026년 1월 5일,대기,모임의 상세 정보를 조회하는 기능,"비회원, 회원, 시스템",P0 - 필수,없음,"1. 사용자가 모임 카드 클릭
2. 시스템이 GYE 테이블 조회
3. 모임 정보 표시 (이름, 설명, 카테고리, 회비, 인원)
4. 비용 계산기 표시 (납입금 + 보증금 = 필요 금액)
5. 최근 활동 미리보기 (피드 3개)
6. 가입하기 버튼 표시 (비회원은 로그인 유도)"
모임 생성,"프로필 관리, 모임 상세 조회","- 필수 정보 누락: 누락된 필드 표시 및 입력 요청
- 이미지 업로드 실패: 기본 이미지 사용 또는 재시도
- 회비 범위 초과: 최소 1만원 이상 안내",모임 시스템,2026년 1월 5일,대기,회원이 새로운 모임을 개설하는 기능,"회원, 시스템",P0 - 필수,로그인 상태,"1. 회원이 모임 생성 메뉴 선택
2. Step 1: 기본 정보 입력 (이름, 설명, 카테고리, 이미지)
3. Step 2: 운영 설정 (월 회비, 최대 인원)
4. Step 3: 정보 확인 및 생성
5. 시스템이 GYE 테이블에 INSERT
6. 생성자가 자동으로 CP(모임장)로 설정
7. 모임 상세 페이지로 이동"
모임 가입,"모임 상세 조회, 잔액 조회, 충전하기, 보증금 락","- 잔액 부족: 충전 유도 및 복귀 URL 저장
- 정원 초과: 가입 불가 안내
- 이미 가입됨: 피드 페이지로 바로 이동
- 동시 가입 충돌: 재시도 안내 (Optimistic Lock)",모임 시스템,2026년 1월 5일,대기,회원이 모임에 참여하며 보증금을 락하는 핵심 기능,"회원, 시스템",P0 - 필수,"로그인 및 가용 잔액 >= 2개월치 (납입금 + 보증금)","1. 회원이 가입하기 버튼 클릭
2. 시스템이 가용 잔액 확인
3. 잔액 부족 시 충전 화면으로 이동 (returnUrl 저장)
4. 가입 확인 모달 표시 (비용 안내 + 보증금 설명)
5. 가입 확정 클릭
6. 트랜잭션 시작 (SERIALIZABLE)
7. ACCOUNTS.balance -= (monthly_fee + deposit_amount)
8. ACCOUNTS.locked_balance += deposit_amount
9. GYE_MEMBERS INSERT (role=MEMBER, deposit_paid=Y)
10. GYE.current_members++, GYE.balance += monthly_fee
11. ACCOUNT_TRANSACTIONS 기록 (type=LOCK)
12. 트랜잭션 커밋
13. 피드 페이지로 이동"
모임 탈퇴,"모임 상세 조회, 보증금 몰수","- 미납금 존재: 미납금 정산 후 탈퇴 안내
- 진행 중인 투표: 투표 완료 후 탈퇴 안내
- CP 탈퇴: 다른 멤버에게 CP 위임 필요",모임 시스템,2026년 1월 5일,대기,회원이 모임에서 나가며 보증금이 몰수되는 기능,"멤버, 시스템",P1 - 중요,모임에 가입된 상태,"1. 멤버가 탈퇴하기 버튼 클릭
2. 탈퇴 확인 모달 표시 (보증금 몰수 경고)
3. 탈퇴 확정
4. 트랜잭션 시작
5. GYE_MEMBERS.left_at = NOW()
6. 보증금 몰수 및 남은 멤버에게 분배
7. GYE.current_members--
8. 트랜잭션 커밋
9. 탈퇴 완료 알림"
모임 정보 수정,"모임 상세 조회","- 권한 없음: CP만 수정 가능 안내
- 모집 완료 후 회비 변경: 변경 불가 안내
- 이미지 업로드 실패: 기존 이미지 유지",모임 시스템,2026년 1월 5일,대기,CP가 모임의 기본 정보를 수정하는 기능,"CP, 시스템",P1 - 중요,CP 권한 보유,"1. CP가 모임 설정 메뉴 선택
2. 수정할 정보 변경 (이름, 설명, 이미지 등)
3. 저장 버튼 클릭
4. 시스템이 GYE 테이블 UPDATE
5. 변경 완료 알림"
모임 해체,"투표 생성, 보증금 해제","- 잔여 금액 존재: 분배 방법 선택 필요
- 진행 중인 투표: 투표 완료 후 해체 진행
- 전원 동의 미달: 해체 불가 안내",모임 시스템,2026년 1월 5일,대기,CP가 모임을 종료하고 모든 보증금을 반환하는 기능,"CP, 시스템",P2 - 선택,CP 권한 및 전원 동의 투표 통과,"1. CP가 모임 해체 메뉴 선택
2. 해체 투표 생성 (type=dissolve, required_ratio=1.00)
3. 전원 동의 시 해체 진행
4. 모든 멤버의 locked_balance → balance 이동
5. GYE.deleted_at = NOW()
6. GYE.dissolution_reason 기록
7. 해체 완료 알림"
멤버 목록 조회,"모임 상세 조회","- 멤버 없음: CP만 존재 표시
- 로딩 실패: 새로고침 안내",모임 시스템,2026년 1월 5일,대기,모임에 가입된 멤버 목록을 조회하는 기능,"멤버, 시스템",P1 - 중요,모임에 가입된 상태,"1. 멤버가 멤버 탭 선택
2. 시스템이 GYE_MEMBERS 조회 (left_at IS NULL)
3. 멤버 리스트 표시 (프로필, 닉네임, 역할, 가입일)
4. CP는 왕관 뱃지로 구분"
보증금 락,"모임 가입","- 잔액 부족: 가입 불가
- 동시성 충돌: 재시도 (Optimistic Lock)",모임 시스템,2026년 1월 5일,대기,모임 가입 시 보증금을 락 상태로 전환하는 시스템 기능,"시스템",P0 - 필수,모임 가입 트랜잭션 내,"1. 모임 가입 트랜잭션 내에서 실행
2. ACCOUNTS.balance -= deposit_amount
3. ACCOUNTS.locked_balance += deposit_amount
4. GYE_MEMBERS.deposit_locked_at = NOW()
5. ACCOUNT_TRANSACTIONS INSERT (type=LOCK)"
보증금 해제,"모임 해체, 모임 완주","- 해제 대상 없음: 이미 해제됨 표시",모임 시스템,2026년 1월 5일,대기,모임 완주/해체 시 보증금을 가용 잔액으로 반환하는 기능,"시스템",P1 - 중요,모임 완주 또는 해체 조건 충족,"1. 완주/해체 조건 충족
2. ACCOUNTS.locked_balance -= deposit_amount
3. ACCOUNTS.balance += deposit_amount
4. GYE_MEMBERS.deposit_unlocked_at = NOW()
5. ACCOUNT_TRANSACTIONS INSERT (type=UNLOCK)
6. 보증금 반환 알림"
보증금 몰수 및 분배,"모임 탈퇴, 멤버 퇴출","- 분배 대상 없음: 모임 금고로 귀속
- 분배 오류: 수동 처리 필요",모임 시스템,2026년 1월 5일,대기,탈퇴/퇴출 시 보증금을 몰수하고 남은 멤버에게 분배,"시스템",P1 - 중요,탈퇴 또는 퇴출 확정,"1. 탈퇴/퇴출 확정
2. 해당 멤버의 locked_balance 조회
3. 남은 활성 멤버 수 계산
4. 균등 분배 금액 계산
5. 각 멤버의 balance += 분배금
6. ACCOUNT_TRANSACTIONS INSERT (각 멤버)
7. 분배 완료 알림"
피드 목록 조회,"피드 작성, 좋아요","- 피드 없음: 첫 글 작성 유도 CTA
- 로딩 실패: 새로고침 안내
- 스크롤 끝: 더 이상 글 없음 표시",SNS 시스템,2026년 1월 5일,대기,모임의 피드 목록을 페이지네이션으로 조회,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 피드 탭 선택
2. 시스템이 POSTS 조회 (gye_id, 최신순, 20개)
3. 공지사항은 상단 고정 (is_announcement=true)
4. 피드 카드 목록 표시
5. Pull-to-refresh 지원
6. 페이지네이션 (20개씩)"
피드 작성,"피드 목록 조회, 이미지 업로드","- 내용 없음: 내용 입력 필수 안내
- 이미지 업로드 실패: 텍스트만 게시 옵션 제공
- 글자 수 초과: 2000자 제한 안내",SNS 시스템,2026년 1월 5일,대기,멤버가 모임에 새 피드를 작성하는 기능,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 글쓰기 FAB 클릭
2. 글 작성 모달 열림
3. 텍스트 입력 (최대 2000자)
4. 이미지 첨부 (선택, 최대 10장)
5. 작성 완료 버튼 클릭
6. POSTS INSERT
7. POST_IMAGES INSERT (이미지 있는 경우)
8. 피드 목록 갱신"
피드 수정,"피드 작성","- 권한 없음: 본인 글만 수정 가능
- 삭제된 피드: 수정 불가 안내",SNS 시스템,2026년 1월 5일,대기,작성자가 본인의 피드를 수정하는 기능,"멤버, 시스템",P1 - 중요,본인이 작성한 피드,"1. 작성자가 피드 메뉴에서 수정 선택
2. 기존 내용이 채워진 수정 모달 열림
3. 내용 수정
4. 저장 버튼 클릭
5. POSTS UPDATE
6. 수정 완료"
피드 삭제,"피드 작성","- 권한 없음: 본인 글만 삭제 가능
- 이미 삭제됨: 삭제 완료 표시",SNS 시스템,2026년 1월 5일,대기,작성자가 본인의 피드를 삭제하는 기능,"멤버, 시스템",P1 - 중요,본인이 작성한 피드,"1. 작성자가 피드 메뉴에서 삭제 선택
2. 삭제 확인 다이얼로그
3. 삭제 확정
4. POSTS.deleted_at = NOW() (Soft Delete)
5. 피드 목록에서 제거"
댓글 조회,"피드 목록 조회","- 댓글 없음: 첫 댓글 작성 유도
- 로딩 실패: 새로고침 안내",SNS 시스템,2026년 1월 5일,대기,피드의 댓글 목록을 조회하는 기능,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 피드의 댓글 영역 클릭
2. 시스템이 COMMENTS 조회 (post_id)
3. 댓글 및 대댓글 계층 구조로 표시
4. 대댓글은 2단계까지만"
댓글 작성,"댓글 조회, 피드 목록 조회","- 내용 없음: 내용 입력 필수
- 글자 수 초과: 500자 제한 안내",SNS 시스템,2026년 1월 5일,대기,멤버가 피드에 댓글을 작성하는 기능,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 댓글 입력창에 내용 작성
2. 작성 버튼 클릭
3. COMMENTS INSERT
4. POSTS.comment_count++ (Atomic)
5. 댓글 목록 갱신"
대댓글 작성,"댓글 작성","- 부모 댓글 삭제됨: 대댓글 작성 불가
- 3단계 이상: 2단계까지만 지원 안내",SNS 시스템,2026년 1월 5일,대기,멤버가 댓글에 답글을 작성하는 기능,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 댓글의 답글 버튼 클릭
2. 대댓글 입력창 표시
3. 내용 작성 후 작성 버튼 클릭
4. COMMENTS INSERT (parent_comment_id 설정)
5. 대댓글 표시"
좋아요 토글,"피드 목록 조회, 댓글 조회","- 이미 좋아요: 좋아요 취소
- 동시성 충돌: Optimistic UI로 처리",SNS 시스템,2026년 1월 5일,대기,멤버가 피드/댓글에 좋아요를 추가하거나 취소,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 좋아요 버튼 클릭
2. Optimistic UI로 즉시 반영
3. POST_LIKES 또는 COMMENT_LIKES INSERT/DELETE
4. POSTS.like_count 또는 COMMENTS.like_count 증감 (Atomic)
5. 실패 시 롤백"
공지사항 작성,"피드 작성","- 권한 없음: CP만 작성 가능
- 기존 공지 존재: 교체 여부 확인",SNS 시스템,2026년 1월 5일,대기,CP가 피드 상단에 고정되는 공지사항을 작성,"CP, 시스템",P0 - 필수,CP 권한 보유,"1. CP가 공지 작성 메뉴 선택
2. 공지 내용 작성
3. 작성 완료
4. POSTS INSERT (is_announcement=true)
5. 피드 상단에 핀 고정 표시"
이미지 업로드,"피드 작성","- 파일 크기 초과: 5MB 제한 안내
- 지원하지 않는 형식: JPG/PNG/GIF만 지원
- S3 오류: 재시도 안내",SNS 시스템,2026년 1월 5일,대기,피드 작성 시 이미지를 S3에 업로드,"멤버, 시스템, S3",P1 - 중요,모임에 가입된 상태,"1. 멤버가 이미지 첨부 버튼 클릭
2. 파일 선택 (최대 10장)
3. S3 Presigned URL 요청
4. S3에 직접 업로드
5. 업로드 완료 후 URL 반환
6. POST_IMAGES에 URL 저장"
지출 요청 생성,"투표 참여, 장부 조회","- 금액 0원: 1원 이상 입력 필요
- 모임 잔액 부족: 잔액 초과 경고
- 중복 요청: 진행 중인 유사 투표 안내",투표 시스템,2026년 1월 5일,대기,멤버/CP가 모임 자금 지출을 위한 투표를 생성,"멤버, CP, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버/CP가 지출 요청 메뉴 선택
2. 제목, 금액, 설명 입력
3. 요청하기 버튼 클릭
4. VOTES INSERT (type=expense)
5. required_ratio 자동 계산 (10만원 미만: 0.50, 이상: 0.67)
6. expires_at = NOW() + 72시간
7. 모임원들에게 투표 알림"
퇴출 투표 생성,"투표 참여, 멤버 목록 조회","- 권한 없음: CP만 생성 가능
- 대상이 CP: CP 퇴출 불가
- 이미 탈퇴함: 투표 불필요",투표 시스템,2026년 1월 5일,대기,CP가 특정 멤버를 퇴출하기 위한 투표를 생성,"CP, 시스템",P2 - 선택,CP 권한 보유,"1. CP가 멤버 목록에서 퇴출 대상 선택
2. 퇴출 사유 입력
3. 퇴출 투표 생성 버튼 클릭
4. VOTES INSERT (type=kick, target_user_id 설정)
5. required_ratio = 0.70
6. expires_at = NOW() + 72시간
7. 모임원들에게 투표 알림"
투표 목록 조회,"지출 요청 생성, 투표 참여","- 투표 없음: CP만 생성 가능 안내 (멤버) / 첫 투표 생성 유도 (CP)
- 로딩 실패: 새로고침 안내",투표 시스템,2026년 1월 5일,대기,모임의 진행 중/완료된 투표 목록을 조회,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 투표 탭 선택
2. 시스템이 VOTES 조회 (gye_id)
3. 진행 중(status=open) 탭과 완료됨 탭 분리
4. 투표 카드 표시 (제목, 금액, 마감시간, 현재 찬성률)
5. 마감 임박 투표 강조 표시"
투표 상세 조회,"투표 목록 조회","- 투표 삭제됨: 404 표시
- 만료됨: 결과만 표시",투표 시스템,2026년 1월 5일,대기,특정 투표의 상세 정보와 현재 현황을 조회,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 투표 카드 클릭
2. 투표 상세 모달 표시
3. 제목, 설명, 금액, 요청자, 마감시간 표시
4. 현재 찬성/반대 수 및 Progress Bar
5. 본인 투표 여부 표시"
투표 참여,"투표 상세 조회","- 이미 투표함: 변경 불가 안내
- 투표 마감됨: 참여 불가 안내
- 권한 없음: 모임 멤버만 가능",투표 시스템,2026년 1월 5일,대기,멤버가 진행 중인 투표에 찬성/반대 의사를 표시,"멤버, 시스템",P0 - 필수,모임에 가입 및 해당 투표 미참여,"1. 멤버가 찬성 또는 반대 버튼 클릭
2. 중복 투표 확인
3. VOTE_RECORDS INSERT (choice=approve/reject)
4. 투표 현황 갱신
5. 필요 찬성 수 도달 시 자동 마감 검토"
투표 결과 확인,"투표 참여, 장부 조회","- 아직 진행 중: 현재 현황만 표시
- 결과 집계 오류: 수동 확인 필요",투표 시스템,2026년 1월 5일,대기,투표의 최종 결과를 확인하는 기능,"멤버, 시스템",P0 - 필수,투표 마감,"1. 투표 마감 또는 조기 확정
2. 찬성/반대 수 최종 집계
3. 필요 찬성률과 비교
4. 승인/거절 판정
5. VOTES.status 업데이트
6. 결과 알림 발송"
투표 마감 처리,"투표 결과 확인, 장부 자동 기록","- 이미 마감됨: 처리 스킵
- 집계 오류: 로그 기록 후 수동 처리",투표 시스템,2026년 1월 5일,대기,72시간 경과 또는 조기 확정 시 투표를 마감하는 시스템 기능,"시스템",P0 - 필수,투표 기간 만료 또는 조건 충족,"1. 스케줄러가 만료된 투표 조회 (매 10분)
2. 각 투표별 찬성/반대 집계
3. 찬성률 >= required_ratio: APPROVED
4. 찬성률 < required_ratio: REJECTED 또는 EXPIRED
5. VOTES.status, approved_at 업데이트
6. type=expense이고 APPROVED면 장부 자동 기록 트리거"
장부 자동 기록,"투표 마감 처리, 장부 조회","- 모임 잔액 부족: ledger_status=FAILED
- 기록 실패: 재시도 후 수동 처리",투표 시스템,2026년 1월 5일,대기,지출 투표 승인 시 장부에 자동으로 기록하는 기능,"시스템",P0 - 필수,"type=expense 투표가 APPROVED 상태","1. 투표 승인 확정
2. 모임 잔액 확인 (GYE.balance >= amount)
3. LEDGER_ENTRIES INSERT (type=EXPENSE)
4. GYE.balance -= amount
5. VOTES.ledger_entry_id 연결
6. VOTES.ledger_status = RECORDED
7. 장부 기록 완료 알림"
멤버 퇴출 처리,"퇴출 투표 생성, 보증금 몰수 및 분배","- 이미 탈퇴함: 처리 스킵
- 분배 오류: 로그 기록 후 수동 처리",투표 시스템,2026년 1월 5일,대기,퇴출 투표 승인 시 멤버를 퇴출하고 보증금을 분배,"시스템",P2 - 선택,type=kick 투표가 APPROVED 상태,"1. 퇴출 투표 승인 확정
2. 대상 멤버 GYE_MEMBERS.left_at = NOW()
3. 보증금 몰수 및 분배 프로세스 실행
4. GYE.current_members--
5. 퇴출 완료 알림 (대상자 및 모임원)"
장부 목록 조회,"장부 요약 조회, 투표 결과 확인","- 장부 없음: 첫 지출 요청 안내
- 로딩 실패: 새로고침 안내",장부 시스템,2026년 1월 5일,대기,모임의 수입/지출 내역을 타임라인으로 조회,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 멤버가 장부 탭 선택
2. 시스템이 LEDGER_ENTRIES 조회 (gye_id, 최신순)
3. 타임라인 형식으로 표시
4. 각 항목: 날짜, 유형, 금액, 설명, 잔액
5. 지출 항목은 연결된 투표 정보 표시
6. 페이지네이션"
장부 요약 조회,"장부 목록 조회, 차트 데이터 조회","- 데이터 없음: 기본값 0 표시
- 집계 오류: 새로고침 안내",장부 시스템,2026년 1월 5일,대기,모임의 총수입/총지출/현재잔액 요약을 조회,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 장부 탭 상단에 요약 카드 표시
2. 총 수입, 총 지출, 현재 잔액 계산
3. 이번 달 vs 지난 달 비교
4. 요약 정보 표시"
장부 분석 요청,"장부 요약 조회, 차트 데이터 조회","- Django 연동 실패: 기본 통계만 표시 (Fallback)
- 데이터 부족: 분석 불가 안내",장부 시스템,2026년 1월 5일,대기,Django 분석 서버에 통계 분석을 요청하는 기능,"멤버, 시스템, Django",P1 - 중요,모임에 가입된 상태,"1. 장부 탭에서 분석 카드 영역 로드
2. Spring이 LEDGER_ENTRIES 조회
3. Django로 거래 내역 JSON 전송
4. Django가 pandas로 분석 (월별, 카테고리별, 트렌드)
5. 분석 결과 JSON 반환
6. 분석 카드 표시 (평균 지출, 트렌드 등)"
차트 데이터 조회,"장부 분석 요청","- 차트 렌더링 실패: 숫자만 표시 (Fallback)
- 데이터 없음: 빈 차트 + 안내 메시지",장부 시스템,2026년 1월 5일,대기,Recharts 차트를 위한 데이터를 조회하는 기능,"멤버, 시스템",P0 - 필수,모임에 가입된 상태,"1. 장부 분석 결과 수신
2. Line Chart 데이터 구성 (월별 지출 추이)
3. Pie Chart 데이터 구성 (카테고리별 비율)
4. Recharts 컴포넌트로 렌더링"
장부 메모 수정,"장부 목록 조회","- 권한 없음: CP만 수정 가능
- 금액 수정 시도: 금액은 수정 불가 안내",장부 시스템,2026년 1월 5일,대기,CP가 장부 항목의 카테고리/메모를 수정하는 기능,"CP, 시스템",P1 - 중요,CP 권한 보유,"1. CP가 장부 항목의 수정 버튼 클릭
2. 카테고리 및 메모 수정 가능 (금액은 불가)
3. 저장 버튼 클릭
4. LEDGER_ENTRIES UPDATE
5. 감사 로그 기록
6. 수정 완료"
회비 자동 기록,"모임 가입, 장부 목록 조회","- 기록 실패: 재시도 후 수동 처리",장부 시스템,2026년 1월 5일,대기,회비 납입 시 장부에 자동으로 수입 기록,"시스템",P0 - 필수,모임 가입 또는 월간 납입,"1. 가입 또는 월간 납입 발생
2. LEDGER_ENTRIES INSERT (type=FEE_COLLECTION)
3. 납입자, 금액, 잔액 기록
4. GYE.balance 업데이트"
알림 발송,"투표 마감 처리, 모임 가입","- 발송 실패: 재시도 큐 등록",알림 시스템,2026년 1월 5일,대기,시스템 이벤트 발생 시 사용자에게 알림을 발송,"시스템",P1 - 중요,알림 트리거 이벤트 발생,"1. 이벤트 발생 (투표 생성, 마감, 가입 등)
2. NOTIFICATIONS INSERT
3. 푸시 알림 발송 (Post-Demo)
4. 알림 목록에 표시"
알림 목록 조회,"알림 발송","- 알림 없음: 빈 상태 표시",알림 시스템,2026년 1월 5일,대기,사용자가 받은 알림 목록을 조회,"회원, 시스템",P1 - 중요,로그인 상태,"1. 회원이 알림 아이콘 클릭
2. NOTIFICATIONS 조회 (user_id, 최신순)
3. 읽음/안읽음 구분 표시
4. 알림 클릭 시 link_url로 이동"
알림 읽음 처리,"알림 목록 조회","- 이미 읽음: 처리 스킵",알림 시스템,2026년 1월 5일,대기,알림을 읽음 상태로 변경,"회원, 시스템",P1 - 중요,알림 존재,"1. 회원이 알림 클릭 또는 전체 읽음
2. NOTIFICATIONS.is_read = Y
3. NOTIFICATIONS.read_at = NOW()
4. 읽지 않은 알림 카운트 갱신"